<!-- 

<html>

<head>
    <title>观察will-change</title>
    <style>
        .box {
            will-change: transform, opacity;
            display: block;
            float: left;
            width: 40px;
            height: 40px;
            margin: 15px;
            padding: 10px;
            border: 1px solid rgb(136, 136, 136);
            background: rgb(187, 177, 37);
            border-radius: 30px;
            transition: border-radius 1s ease-out;
        }

        body {
            font-family: Arial;
        }
    </style>
</head>


<body>
    <div id="controls">
        <button id="start">start</button>
        <button id="stop">stop</button>
    </div>
    <div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
        <div class="box">旋转盒子</div>
    </div>
    <script>

        let boxes = document.querySelectorAll('.box');
        let boxes1 = document.querySelectorAll('.box1');
        let start = document.getElementById('start');
        let stop = document.getElementById('stop');
        let stop_flag = false


        start.addEventListener('click', function () {
            stop_flag = false
            requestAnimationFrame(render);
        })


        stop.addEventListener('click', function () {
            stop_flag = true
        })


        let rotate_ = 0
        let opacity_ = 0
        function render() {
            if (stop_flag)
                return 0
            rotate_ = rotate_ + 6
            if (opacity_ > 1)
                opacity_ = 0
            opacity_ = opacity_ + 0.01
            let command = 'rotate(' + rotate_ + 'deg)';
            for (let index = 0; index < boxes.length; index++) {
                boxes[index].style.transform = command
                boxes[index].style.opacity = opacity_
            }
            requestAnimationFrame(render);
        }
    </script>
</body>


</html> -->
<html>

<body>
    <div id="mian_div">
        <li id="time_li">time</li>
        <li>geekbang</li>
    </div>

    <p id="demo">强制布局demo</p>
    <button onclick="foo()">添加新元素</button>

    <script>
        // function foo() {
        //     let main_div = document.getElementById("mian_div")      
        //     let new_node = document.createElement("li")
        //     let textnode = document.createTextNode("time.geekbang")
        //     new_node.appendChild(textnode);
        //     document.getElementById("mian_div").appendChild(new_node);
        // }
        // function Foo(property_num,element_num) {
        //     //添加可索引属性
        //     for (let i = 0; i < element_num; i++) {
        //         this[i] = `element${i}`
        //     }
        //     //添加常规属性
        //     for (let i = 0; i < property_num; i++) {
        //         let ppt = `property${i}`
        //         this[ppt] = ppt
        //     }
        // }
        // var bar = new Foo(10,10)
        // var bar2 = new Foo(20,10)
        // var bar3 = new Foo(100,10)

        // foo() // TypeError: foo is not a function
        // var foo = function (){
        //     console.log('foo')
        // }

        // foo() // 正常打印
        // fetch(id_url)

        //     .then((response) => {

        //         return response.text()

        //     })

        //     .then((response) => {

        //         let new_name_url = name_url + "?id=" + response

        //         return fetch(new_name_url)

        //     }).then((response) => {

        //         return response.text()

        //     }).then((response) => {

        //         console.log(response)//输出最终的结果

        //     })

        // function* getResult() {
        //     let id_res = yield fetch(id_url);
        //     console.log(id_res)
        //     let id_text = yield id_res.text();
        //     console.log(id_text)


        //     let new_name_url = name_url + "?id=" + id_text
        //     console.log(new_name_url)


        //     let name_res = yield fetch(new_name_url)
        //     console.log(name_res)
        //     let name_text = yield name_res.text()
        //     console.log(name_text)
        // }


        // let result = getResult()
        // result.next().value.then((response) => {
        //     return result.next(response).value
        // }).then((response) => {
        //     return result.next(response).value
        // }).then((response) => {
        //     return result.next(response).value
        // }).then((response) => {
        //     return result.next(response).value
        // })


        // function* getResult() {
        //     let id_res = yield fetch(id_url);
        //     console.log(id_res)
        //     let id_text = yield id_res.text();
        //     console.log(id_text)


        //     let new_name_url = name_url + "?id=" + id_text
        //     console.log(new_name_url)


        //     let name_res = yield fetch(new_name_url)
        //     console.log(name_res)
        //     let name_text = yield name_res.text()
        //     console.log(name_text)
        // }
        // co(getResult())


        // async function getResult() {
        //     try {
        //         let id_res = await fetch(id_url)
        //         let id_text = await id_res.text()
        //         console.log(id_text)

        //         let new_name_url = name_url + "?id=" + id_text
        //         console.log(new_name_url)


        //         let name_res = await fetch(new_name_url)
        //         let name_text = await name_res.text()
        //         console.log(name_text)
        //     } catch (err) {
        //         console.error(err)
        //     }
        // }
        // getResult()
        // alert(true + 1)
        // alert(true + 'name')
        // alert('name' + true)
        // alert(undefined + 1)
        // alert(typeof null)

    const p = Promise.race([
        fetch('/resource-that-may-take-a-while'),
        new Promise(function(resolve, reject){
            setTimeout(() => reject(new Error('reggg tomeout')), 5000)
        })
    ])
    p.then(response => console.log(response))
    p.catch(error => console.log(error))
    </script>
</body>

</html>